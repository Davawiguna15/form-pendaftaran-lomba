<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pendaftaran Lomba 17 Agustus 2025</title>
  <style>
    body { font-family: sans-serif; background: #eef2f3; margin: 0; padding: 0; text-align: center; }
    .container { max-width: 600px; margin: 40px auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px #ccc; }
    h1, h2 { color: #333; }
    label { display: block; margin-top: 15px; text-align: left; font-weight: bold; }
    input, select, button {
      width: 100%; padding: 10px; margin-top: 5px; box-sizing: border-box;
      border: 1px solid #ccc; border-radius: 4px;
    }
    button {
      background-color: #007bff; color: white; font-weight: bold;
      border: none; margin-top: 20px;
    }
    button:hover { background-color: #0056b3; cursor: pointer; }
    .hidden { display: none; }
  </style>
</head>
<body>

<!-- Halaman Home -->
<div id="home" class="container">
  <h1>Haii Peserta Lomba 17 Agustus 2025 RT04/RW14</h1>
  <button onclick="showForm()">Klik Start untuk Memulai</button>
</div>

<!-- Form Pendaftaran -->
<div id="formSection" class="container hidden">
  <h2>Formulir Pendaftaran</h2>
  <form id="lombaForm">
    <label>Nama Lengkap:</label>
    <input type="text" name="nama" required>

    <label>Usia:</label>
    <input type="number" name="usia" id="usia" required min="3" onchange="updateLombaOptions()">

    <label>Nomor HP Orang Tua / Peserta:</label>
    <input type="tel" name="nomor_hp" required>

    <label>Dari Buni Berapa:</label>
    <select name="buni" required>
      <option value="">-- Pilih --</option>
      <option>Buni Raya</option>
      <option>Buni 1</option>
      <option>Buni 2</option>
      <option>Buni 3</option>
      <option>Buni 4</option>
      <option>Buni 5</option>
    </select>

    <div id="lombaContainer" class="hidden">
      <label>Pilih Lomba (Maksimal 2):</label>
      <select name="lomba" id="lomba" multiple size="4" required></select>
    </div>

    <button type="submit">Kirim Pendaftaran</button>
  </form>
</div>

<!-- Halaman Terima Kasih -->
<div id="thanks" class="container hidden">
  <h2>Terimakasih telah mendaftar!</h2>
  <p>KAMI TUNGGU KEDATANGAN KALIAN</p>
  <strong>SEE YOUU!</strong>
</div>

<script>
  const usiaLombaMap = {
    "3-5": ["Mewarnai", "Masukin Bendera", "Estafet gundu"],
    "6-8": ["Menyusun Puzzle", "Masukin Bendera", "Estafet gundu"],
    "9-11": ["Meniup Gelas", "Masukin Bendera", "Estafet gundu"],
    "11-13": ["Memindahkan kacang dengan sumpit", "Masukin Bendera", "Estafet gundu"],
    "ibu": ["Estafet Air", "Masukin Bendera", "Estafet gundu"],
    "bapak": ["Estafet getok palu", "Masukin Bendera", "Estafet gundu"]
  };

  function showForm() {
    document.getElementById("home").classList.add("hidden");
    document.getElementById("formSection").classList.remove("hidden");
  }

  function updateLombaOptions() {
    const usia = parseInt(document.getElementById("usia").value);
    const select = document.getElementById("lomba");
    const container = document.getElementById("lombaContainer");
    select.innerHTML = "";

    let options = [];

    if (usia >= 3 && usia <= 5) options = usiaLombaMap["3-5"];
    else if (usia >= 6 && usia <= 8) options = usiaLombaMap["6-8"];
    else if (usia >= 9 && usia <= 11) options = usiaLombaMap["9-11"];
    else if (usia >= 11 && usia <= 13) options = usiaLombaMap["11-13"];
    else if (usia >= 18 && usia <= 50) options = usiaLombaMap["ibu"];
    else if (usia >= 18 && usia <= 70) options = usiaLombaMap["bapak"];

    if (options.length > 0) {
      container.classList.remove("hidden");
      options.forEach(opt => {
        const el = document.createElement("option");
        el.value = opt;
        el.textContent = opt;
        select.appendChild(el);
      });
    } else {
      container.classList.add("hidden");
    }
  }

  document.getElementById("lombaForm").addEventListener("submit", async function (e) {
    e.preventDefault();

    const form = e.target;
    const selected = [...form.lomba.options].filter(opt => opt.selected).map(opt => opt.value);

    if (selected.length === 0 || selected.length > 2) {
      alert("Silakan pilih maksimal 2 lomba.");
      return;
    }

    const data = {
      nama: form.nama.value,
      usia: form.usia.value,
      nomor_hp: form.nomor_hp.value,
      buni: form.buni.value,
      lomba: selected.join(", ")
    };

    try {
      await fetch("https://script.google.com/macros/s/AKfycbwMMVpEwSOnuSwLOvSJoZZEUnfue3fbr67tZhQsjSzm9hu1JodJgSBqHO6dMYE_1wzo/exec", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify(data)
});


      form.reset();
      document.getElementById("formSection").classList.add("hidden");
      document.getElementById("thanks").classList.remove("hidden");
    } catch (error) {
      alert("Terjadi kesalahan saat mengirim data.");
    }
  });
</script>

</body>
</html>
